<%= javascript_tag defer: 'defer' do -%>
  $(document).ready(function() {
  console.log('topics js loaded');

  // Logic to Hide/Show LEVEL Selected
  $('#level').on('change', function() {
    console.log(this.value); 
    if (this.value === "0") {
      console.log("level selected")
      $(".one").show();
      $(".two").show();
      $(".three").show();
    } else if (this.value === "1") {
      console.log("beginner selected")
      $(".one").show();
      $(".two").hide();
      $(".three").hide();
    } else if (this.value === "2"){
      console.log("intermediate selected");
      $(".two").show();
      $(".one").hide();
      $(".three").hide();
    } else if (this.value === "3"){
      console.log("advanced selected");
      $(".three").show();
      $(".one").hide();
      $(".two").hide();
    }
  });

  // Logic to Hide/Show TOPIC Selected
  $('#topic').on('change', function() {
    console.log(this.value); 
    if (this.value === "0") {
      console.log("topic selected");
      $(".curriculum").show();
    } 
<%@topics.each do |topic| %> 
    else if (this.value === "<%= topic.id %>" ) {
      $(".curriculum").hide();
      $(".<%=topic.name%> ").show();
    } 
<%end%> 
  });




});
<% end -%>

<!-- Dropdowns to select "Topic" and "Level" -->
<%= form_tag('/curriculums', remote: true) do %>

  <!-- Topic Dropdown -->
    <%= select_tag(:topic, options_for_select(
      [
        ['All Topics', 0], 
        ['Javascript', 1,{:class => "javaScript"}], 
        ['Ruby', 2,{:class => "ruby"}], 
        ['Python', 3, {:class => "Phyton"}]
      ], selected: :topic ),
      { :id => 'topic' }) %>

  <!-- Level Dropdown -->
    <%= select_tag(:level, options_for_select(
      [
        ['All Levels', 0], 
        ['Beginner', 1, {:class => "beginner"}], 
        ['Intermediate', 2, {:class => "intermediate"}], 
        ['Advanced', 3, {:class => "advanced"}]
      ], selected: :level ), 
      { :id => 'level' }) %>

  <% end %>

<!-- Curriculum Table Display -->
<p id="notice"><%= notice %></p>

<h1>Listing Curriculums</h1>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Rating</th>
      <th>Description</th>
      <th>Level</th>
      <th>User</th>
      <th>Topic</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody id = "curriculums">
    <% @curriculums.each do |curriculum| %>
      <tr <%if curriculum.level.to_i == 1 %> 
              class = "curriculum one <%= curriculum.topic.name %> "
              <%elsif curriculum.level.to_i == 2 %> 
              class = "curriculum two <%= curriculum.topic.name %>"
              <%elsif curriculum.level.to_i == 3 %> 
              class = "curriculum three <%= curriculum.topic.name %>"
          <%end%>>

        <td><%= link_to curriculum.title, curriculum %></td>
        <td><%= curriculum.rating %></td>
        <td><%= curriculum.description %></td>
        <td><%= curriculum.level %></td>
        <td><img src="<%= curriculum.user.image %>" width="50"></td>
        <td><%= curriculum.topic.name %></td>
        <td><%= link_to 'Show', curriculum %></td>
        <td><%= link_to 'Edit', edit_curriculum_path(curriculum) %></td>
        <td><%= link_to 'Destroy', curriculum, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>